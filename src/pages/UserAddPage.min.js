import Header from "../components/admin/Header.js";
import Footer from "../components/admin/Footer.js";
import Sidebar from "../components/admin/Sidebar.js";
import { parseRequestUrl, $, reRender } from "../utils.js";
import UserAPI from "../api/userAPI.js";
import AdminUser from "./AdminUser.js";

const UserAddPage = {
    render: async() => `\n  
      ${await Sidebar.render()}\n  
            ${await Header.render()}\n  
                  <form id="form-add" enctype="multipart/form-data" >\n         
                     <div class="form-group">\n           
                          <label for="fullname">Họ và tên:  </label>      \n        
                                 
                          <input type="text" class= "form-control" placeholder="Họ và tên" id="fullname">\n   
                                       <p style="color:red; font-size:17px;" id= "error-fullname"></p>\n     
                                              </div>  \n           \n\n            <div class="form-group">\n                <label for="username">Tên đăng nhập:  </label>      \n                <input type="text" class= "form-control" placeholder="Tên đăng nhập" id="username">\n                <p style="color:red; font-size:17px;"  id= "error-username"></p>\n             </div> \n            \n            <div class="form-group">\n                <label for="password">Mật khẩu:  </label>      \n                <input type="text" class= "form-control" placeholder="Mật khẩu" id="password">\n                <p style="color:red; font-size:17px;"  id= "error-password"></p>\n            </div> \n\n            <div class="form-group">\n                <label for="email">Email:  </label>      \n                <input type="text" class= "form-control" placeholder="Email" id="email">\n                <p style="color:red; font-size:17px;"  id= "error-email"></p>\n            </div> \n\n            <div class="form-group">\n                <input style="width:150px; margin-left:10px" class="btn btn-primary" value="Add User" type="submit">   \n            </div> \n        </form>\n        ${await Footer.render()}\n        \n        `,
    async afterRender() {

        $("#form-add").addEventListener("submit", e => {
            if (e.preventDefault(), "" == $("#fullname").value)
                return $("#error-fullname").innerHTML = "Không để trống phần này", !1; {

                const user = {
                    id: Math.random().toString(36).substr(2, 9),
                    fullname: $("#fullname").value,
                    password: $("#password").value,
                    username: $("#username").value,
                    email: $("#email").value
                };

                UserAPI.add(user), window.location.hash = "/listuser"
                await reRender(AdminUser, "#root");

            }
        })
    }
};
export default UserAddPage;